{"version":3,"file":"../public-notice.js","sources":["public-notice.js"],"sourcesContent":["/**\n * Read message from cookie\n */\n\n/*global Cookies:false*/\n/*global GianSays:true*/\n/*global GianismHelper: false*/\n\njQuery( document ).ready( function ( $ ) {\n\n\t'use strict';\n\n\twindow.GianSays = {\n\t\tdivs: [],\n\t\tstr: [ 'updated', 'error' ],\n\t\tpushMsg: function ( msg, className ) {\n\t\t\tvar div = $( '<div><p></p></div>' );\n\t\t\tdiv.addClass( className ).find( 'p' ).html( msg.replace( /\\+/g, ' ' ) );\n\t\t\tthis.divs.push( div );\n\t\t},\n\t\tgrabMessage: function () {\n\t\t\tfor ( var i = 0; i < 2; i++ ) {\n\t\t\t\tvar key_name = 'gianism_' + this.str[ i ],\n\t\t\t\t\tmessages = Cookies.get( key_name );\n\t\t\t\tif ( messages ) {\n\t\t\t\t\tmessages = JSON.parse( messages );\n\t\t\t\t\t// Message exists.\n\t\t\t\t\tfor ( var j = 0, k = messages.length; j < k; j++ ) {\n\t\t\t\t\t\tthis.pushMsg( messages[ j ], this.str[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\t// Delete cookie\n\t\t\t\t\tCookies.remove( key_name, {\n\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\tdomain: location.host,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tflushMessage: function () {\n\t\t\tif ( this.divs.length ) {\n\t\t\t\t// Add all div\n\t\t\t\tvar $container = $( '<div class=\"wpg-notices toggle\"></div>' );\n\t\t\t\t$.each( this.divs, function ( index, div ) {\n\t\t\t\t\t// Append each div to container.\n\t\t\t\t\t$container.append( div );\n\t\t\t\t\t// Append close button\n\t\t\t\t\tvar $link = $( '<a href=\"#close\" class=\"close-btn\"><i class=\"lsf lsf-close\"></i></a>' );\n\t\t\t\t\t$link.click( function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t$( div ).remove();\n\t\t\t\t\t} );\n\t\t\t\t\t$( div ).append( $link );\n\t\t\t\t\t// Add container to footer.\n\t\t\t\t\t$( 'body' ).append( $container );\n\t\t\t\t\t// Fade in, then\n\t\t\t\t\t$container.removeClass( 'toggle' ).find( 'div.updated, div.error' ).effect( 'highlight', {}, 1000, function () {\n\t\t\t\t\t\tsetTimeout( function () {\n\t\t\t\t\t\t\t$container.fadeOut( 2000, function () {\n\t\t\t\t\t\t\t\t$( this ).remove();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}, 15000 );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tthis.div = [];\n\t\t\t}\n\t\t},\n\t\tconfirm: function ( e ) {\n\t\t\tvar $btn = $( this );\n\t\t\tvar message = $btn.attr( 'data-gianism-confirmation' );\n\t\t\tvar labels = $btn.attr( 'data-gianism-target' ).split( ',' );\n\t\t\te.preventDefault();\n\t\t\tGianSays.confirmDialog( message, labels, $btn.attr( 'href' ) );\n\t\t},\n\t\tconfirmDialog: function ( message, labels, url ) {\n\t\t\tvar list = $.map( labels, function ( item, index ) {\n\t\t\t\treturn '<li>' + item + '</li>';\n\t\t\t} ).join( '' );\n\t\t\tvar $markup = $( '<div class=\"wpg-confirm-container\">' +\n\t\t\t\t'<div class=\"wpg-confirm-body\">' +\n\t\t\t\t'<div class=\"wpg-confirm-title\">' + GianismHelper.confirmLabel + '</div>' +\n\t\t\t\t'<div class=\"wpg-confirm-content\">' +\n\t\t\t\t'<p>' + message + '</p>' +\n\t\t\t\t'<ul>' + list + '</ul>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"wpg-confirm-footer\">' +\n\t\t\t\t'<button class=\"deny\">' + GianismHelper.btnCancel + '</button>' +\n\t\t\t\t'<button class=\"confirm\">' + GianismHelper.btnConfirm + '</button>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' );\n\t\t\t$( 'body' ).append( $markup );\n\t\t\t$markup.on( 'click', 'button', function () {\n\t\t\t\tif ( $( this ).hasClass( 'deny' ) ) {\n\t\t\t\t\t$markup.remove();\n\t\t\t\t} else if ( $( this ).hasClass( 'confirm' ) ) {\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t};\n\n\t// Flush message if set.\n\tGianSays.grabMessage();\n\tGianSays.flushMessage();\n\n\t// Debug mode.\n\tvar match = /gianism_debug_message=(updated|error)/.exec( window.location.hash );\n\tif ( match ) {\n\t\tGianSays.pushMsg( 'This is a test message. Just check for that.', match[ 1 ] );\n\t\tGianSays.flushMessage();\n\t}\n\n\t// Confirmation button.\n\t$( '.wpg-button[data-gianism-confirmation]' ).click( GianSays.confirm );\n\n} );\n"],"names":["jQuery","document","ready","$","window","GianSays","divs","str","pushMsg","msg","className","div","addClass","find","html","replace","this","push","grabMessage","i","key_name","messages","Cookies","get","j","k","JSON","parse","length","remove","path","domain","location","host","flushMessage","$container","each","index","append","$link","click","e","preventDefault","removeClass","effect","setTimeout","fadeOut","confirm","$btn","message","attr","labels","split","confirmDialog","url","list","map","item","join","$markup","GianismHelper","confirmLabel","btnCancel","btnConfirm","on","hasClass","href","match","exec","hash"],"mappings":"AAQAA,OAAQC,QAAS,EAAEC,MAAO,SAAWC,GAIpCC,OAAOC,SAAW,CACjBC,KAAM,GACNC,IAAK,CAAE,UAAW,SAClBC,QAAS,SAAWC,EAAKC,GACxB,IAAIC,EAAMR,EAAG,oBAAqB,EAClCQ,EAAIC,SAAUF,CAAU,EAAEG,KAAM,GAAI,EAAEC,KAAML,EAAIM,QAAS,MAAO,GAAI,CAAE,EACtEC,KAAKV,KAAKW,KAAMN,CAAI,CACrB,EACAO,YAAa,WACZ,IAAM,IAAIC,EAAI,EAAGA,EAAI,EAAGA,CAAC,GAAK,CAC7B,IAAIC,EAAW,WAAaJ,KAAKT,IAAKY,GAEtC,GAAKE,EADOC,QAAQC,IAAKH,CAAS,EAClB,CAGf,IAAM,IAFNC,EAEUG,EAAI,EAAGC,GAAIJ,EAFVK,KAAKC,MAAON,CAAS,GAEFO,OAAQJ,EAAIC,EAAGD,CAAC,GAC7CR,KAAKR,QAASa,EAAUG,GAAKR,KAAKT,IAAKY,EAAI,EAG5CG,QAAQO,OAAQT,EAAU,CACzBU,KAAM,IACNC,OAAQC,SAASC,IAClB,CAAE,CACH,CACD,CACD,EACAC,aAAc,WACb,IAEKC,EAFAnB,KAAKV,KAAKsB,SAEVO,EAAahC,EAAG,wCAAyC,EAC7DA,EAAEiC,KAAMpB,KAAKV,KAAM,SAAW+B,EAAO1B,GAEpCwB,EAAWG,OAAQ3B,CAAI,EAEvB,IAAI4B,EAAQpC,EAAG,sEAAuE,EACtFoC,EAAMC,MAAO,SAAWC,GACvBA,EAAEC,eAAe,EACjBvC,EAAGQ,CAAI,EAAEkB,OAAO,CACjB,CAAE,EACF1B,EAAGQ,CAAI,EAAE2B,OAAQC,CAAM,EAEvBpC,EAAG,MAAO,EAAEmC,OAAQH,CAAW,EAE/BA,EAAWQ,YAAa,QAAS,EAAE9B,KAAM,wBAAyB,EAAE+B,OAAQ,YAAa,GAAI,IAAM,WAClGC,WAAY,WACXV,EAAWW,QAAS,IAAM,WACzB3C,EAAGa,IAAK,EAAEa,OAAO,CAClB,CAAE,CACH,EAAG,IAAM,CACV,CAAE,CACH,CAAE,EACFb,KAAKL,IAAM,GAEb,EACAoC,QAAS,SAAWN,GACnB,IAAIO,EAAO7C,EAAGa,IAAK,EACfiC,EAAUD,EAAKE,KAAM,2BAA4B,EACjDC,EAASH,EAAKE,KAAM,qBAAsB,EAAEE,MAAO,GAAI,EAC3DX,EAAEC,eAAe,EACjBrC,SAASgD,cAAeJ,EAASE,EAAQH,EAAKE,KAAM,MAAO,CAAE,CAC9D,EACAG,cAAe,SAAWJ,EAASE,EAAQG,GAC1C,IAAIC,EAAOpD,EAAEqD,IAAKL,EAAQ,SAAWM,EAAMpB,GAC1C,MAAO,OAASoB,EAAO,OACxB,CAAE,EAAEC,KAAM,EAAG,EACTC,EAAUxD,EAAG,mGAEoByD,cAAcC,aAElD,6CAAQZ,EACR,WAASM,EAGT,mEAA0BK,cAAcE,UACxC,oCAA6BF,cAAcG,WAG3C,6BAAS,EACV5D,EAAG,MAAO,EAAEmC,OAAQqB,CAAQ,EAC5BA,EAAQK,GAAI,QAAS,SAAU,WACzB7D,EAAGa,IAAK,EAAEiD,SAAU,MAAO,EAC/BN,EAAQ9B,OAAO,EACJ1B,EAAGa,IAAK,EAAEiD,SAAU,SAAU,IACzC7D,OAAO4B,SAASkC,KAAOZ,EAEzB,CAAE,CACH,CACD,EAGAjD,SAASa,YAAY,EACrBb,SAAS6B,aAAa,EAGtB,IAAIiC,EAAQ,wCAAwCC,KAAMhE,OAAO4B,SAASqC,IAAK,EAC1EF,IACJ9D,SAASG,QAAS,+CAAgD2D,EAAO,EAAI,EAC7E9D,SAAS6B,aAAa,GAIvB/B,EAAG,wCAAyC,EAAEqC,MAAOnC,SAAS0C,OAAQ,CAEvE,CAAE"}